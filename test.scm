(load-extension "./libguile-rocksdb" "init")
(use-modules (rocksdb)
             (rocksdb options))

(let ([opts (rocksdb-options-create)]
      [wopts (rocksdb-writeoptions-create)])
  (rocksdb-options-increase-parallelism! opts 4)
  (rocksdb-options-optimize-level-style-compaction! opts 0)
  (rocksdb-options-set-create-if-missing! opts 1)
  (let ([db (rocksdb-open opts "/tmp/rocksdb_simple_example")])
    (rocksdb-put db #vu8(1) #vu8(2))
    (rocksdb-put db #vu8(3) #vu8(4) wopts)
    (display "opts: ")
    (display opts)
    (newline)
    (display "db: ")
    (display db)
    (newline)))
